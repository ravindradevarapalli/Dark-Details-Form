<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Browser‑Based Quiz</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
      }
      #quiz-container {
        width: 90%;
        max-width: 620px;
        margin: 2rem auto;
        text-align: center;
      }
      .card {
        background: #fff;
        padding: 2rem;
        margin: 1rem 0;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
      .question {
        font-size: 1.2rem;
        margin-bottom: 1rem;
      }
      .choices {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
      .choice-btn {
        padding: 0.75rem;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        background: #fff;
        cursor: pointer;
        transition: background 0.2s;
      }
      .choice-btn:hover {
        background: #e0e0e0;
      }
      .choice-btn.correct {
        background: #c8e6c9; /* light green */
        border-color: #388e3c;
        color: #388e3c;
      }
      .choice-btn.wrong {
        background: #ffcdd2; /* light red */
        border-color: #d32f2f;
        color: #d32f2f;
      }
      .choice-btn.disabled {
        pointer-events: none;
        opacity: 0.6;
      }
      #timer {
        font-weight: bold;
        margin-bottom: 1rem;
      }
      #start-btn,
      #restart-btn {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        background: #1976d2;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
      }
      #start-btn:hover,
      #restart-btn:hover {
        background: #1565c0;
      }
      #final-result {
        font-size: 1.3rem;
        margin-top: 1rem;
      }
      .result-list {
        text-align: left;
        margin-top: 1rem;
        max-height: 300px;
        overflow-y: auto;
      }
      .result-item {
        padding: 0.5rem;
        border-bottom: 1px solid #ddd;
      }
      .result-item .question-text {
        font-weight: bold;
      }
      .result-item .user-answer {
        color: #d32f2f;
      }
      .result-item .correct-answer {
        color: #388e3c;
      }

      #theme-toggle {
        position: absolute;
        top: 1rem;
        right: 1rem;
        cursor: pointer;
      }
      .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
      }
      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: 0.4s;
        transition: 0.4s;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        -webkit-transition: 0.4s;
        transition: 0.4s;
      }
      input:checked + .slider {
        background-color: #2196f3;
      }
      input:focus + .slider {
        box-shadow: 0 0 1px #2196f3;
      }
      input:checked + .slider:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
      }
      .slider.round {
        border-radius: 34px;
      }
      .slider.round:before {
        border-radius: 50%;
      }
      .dark-mode {
        background-color: #121212;
        color: #ffffff;
      }
      .dark-mode .card {
        background-color: #1e1e1e;
        box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
      }
      .dark-mode .choice-btn {
        background-color: #333333;
        border-color: #555555;
        color: #ffffff;
      }
      .dark-mode .choice-btn:hover {
        background-color: #444444;
      }
      .dark-mode .choice-btn.correct {
        background: #2e7d32;
        border-color: #66bb6a;
        color: #ffffff;
      }
      .dark-mode .choice-btn.wrong {
        background: #c62828;
        border-color: #ef5350;
        color: #ffffff;
      }
      .dark-mode #start-btn,
      .dark-mode #restart-btn {
        background: #0d47a1;
      }
      .dark-mode #start-btn:hover,
      .dark-mode #restart-btn:hover {
        background: #1565c0;
      }
      .dark-mode .result-list {
        border-bottom-color: #444;
      }
      .dark-mode .result-item {
        border-bottom-color: #444;
      }
    </style>
  </head>
  <body id="body">
    <div id="theme-toggle">
      <label class="switch" for="dark-mode-toggle">
        <input type="checkbox" id="dark-mode-toggle" title="Toggle dark mode" />
        <span class="slider round"></span>
      </label>
    </div>
    <div id="quiz-container">
      <!-- Start screen -->
      <div id="start-screen" class="card">
        <h2>Welcome to the Quiz!</h2>
        <p>
          Test your knowledge across a variety of topics.<br />
          You have <strong>60 seconds</strong> per question. Choose an answer
          and you’ll instantly see if you’re right.
        </p>
        <button id="start-btn">Start Quiz</button>
      </div>

      <!-- Question screen -->
      <div id="question-screen" class="card" style="display: none">
        <div id="timer">Time left: <span id="time-remaining">60</span>s</div>
        <div class="question" id="question-text"></div>
        <div class="choices" id="choices-container"></div>
      </div>

      <!-- Result screen -->
      <div id="result-screen" class="card" style="display: none">
        <h2>Quiz Completed!</h2>
        <div id="final-result"></div>
        <div class="result-list" id="result-list"></div>
        <button id="restart-btn">Restart Quiz</button>
      </div>
    </div>

    <script>
      /* --------------------------------------------------------------
   Quiz data – you can freely edit / extend this array.
   Each entry:
   - question: string
   - choices: array of strings
   - correctIndex: 0‑based index of the correct choice
   -------------------------------------------------------------- */
      const quizData = [
        {
          question: "What is the capital of France?",
          choices: ["Paris", "Berlin", "Rome", "Madrid"],
          correctIndex: 0,
        },
        {
          question: "Which planet is known as the Red Planet?",
          choices: ["Mercury", "Venus", "Mars", "Jupiter"],
          correctIndex: 2,
        },
        {
          question: "Who wrote the play 'Romeo and Juliet'?",
          choices: [
            "William Shakespeare",
            "Charles Dickens",
            "Jane Austen",
            "Mark Twain",
          ],
          correctIndex: 0,
        },
        {
          question: "What is the largest ocean on Earth?",
          choices: [
            "Atlantic Ocean",
            "Indian Ocean",
            "Arctic Ocean",
            "Pacific Ocean",
          ],
          correctIndex: 3,
        },
        {
          question: "Which element has the chemical symbol 'O'?",
          choices: ["Gold", "Oxygen", "Osmium", "Zinc"],
          correctIndex: 1,
        },
        {
          question: "In computing, what does 'CPU' stand for?",
          choices: [
            "Central Process Unit",
            "Computer Processing Unit",
            "Central Processing Unit",
            "Control Processing Unit",
          ],
          correctIndex: 2,
        },
        {
          question:
            "Which year did the World Wide Web become publicly available?",
          choices: ["1989", "1991", "1995", "1999"],
          correctIndex: 1,
        },
        {
          question:
            "What is the boiling point of water at sea level in Celsius?",
          choices: ["90°C", "95°C", "100°C", "105°C"],
          correctIndex: 2,
        },
        {
          question: "Which language is primarily spoken in Brazil?",
          choices: ["Spanish", "Portuguese", "French", "English"],
          correctIndex: 1,
        },
        {
          question: "Who painted the Mona Lisa?",
          choices: [
            "Vincent van Gogh",
            "Pablo Picasso",
            "Leonardo da Vinci",
            "Michelangelo",
          ],
          correctIndex: 2,
        },
      ];

      /* --------------------------------------------------------------
   Global state variables
   -------------------------------------------------------------- */
      let currentQuestionIndex = 0;
      let score = 0;
      let timerInterval = null;
      const questionTime = 60; // seconds per question
      let timeLeft = questionTime;
      const userAnswers = []; // {questionIndex, selectedIndex, isCorrect, timedOut}

      /* --------------------------------------------------------------
   UI element references
   -------------------------------------------------------------- */
      const startScreen = document.getElementById("start-screen");
      const questionScreen = document.getElementById("question-screen");
      const resultScreen = document.getElementById("result-screen");

      const startBtn = document.getElementById("start-btn");
      const restartBtn = document.getElementById("restart-btn");

      const questionText = document.getElementById("question-text");
      const choicesBox = document.getElementById("choices-container");
      const timerDisplay = document.getElementById("time-remaining");

      const finalResult = document.getElementById("final-result");
      const resultList = document.getElementById("result-list");

      /* --------------------------------------------------------------
   Event listeners for start / restart
   -------------------------------------------------------------- */
      startBtn.addEventListener("click", startQuiz);
      restartBtn.addEventListener("click", restartQuiz);

      /* --------------------------------------------------------------
   Dark Mode Toggle
   -------------------------------------------------------------- */
      const darkModeToggle = document.getElementById("dark-mode-toggle");
      const body = document.getElementById("body");

      darkModeToggle.addEventListener("change", () => {
        body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", darkModeToggle.checked);
      });

      // Check for saved dark mode preference
      const prefersDarkMode = localStorage.getItem("darkMode") === "true";
      if (prefersDarkMode) {
        body.classList.add("dark-mode");
        darkModeToggle.checked = true;
      }

      /* --------------------------------------------------------------
   Core functions
   -------------------------------------------------------------- */
      function startQuiz() {
        // reset state
        currentQuestionIndex = 0;
        score = 0;
        userAnswers.length = 0;
        showQuestion();
      }
      function restartQuiz() {
        // Reset UI to start screen
        startScreen.style.display = "block";
        questionScreen.style.display = "none";
        resultScreen.style.display = "none";
      }

      /* --------------------------------------------------------------
   Show a question (or the result screen if finished)
   -------------------------------------------------------------- */
      function showQuestion() {
        // If we ran out of questions → results
        if (currentQuestionIndex >= quizData.length) {
          showResult();
          return;
        }

        // reset timer UI
        resetTimer();

        // Populate question UI
        const q = quizData[currentQuestionIndex];
        questionText.textContent = `${currentQuestionIndex + 1}. ${q.question}`;
        choicesBox.innerHTML = ""; // clear old buttons

        q.choices.forEach((choice, idx) => {
          const btn = document.createElement("button");
          btn.className = "choice-btn";
          btn.textContent = choice;
          btn.dataset.index = idx;
          btn.addEventListener("click", () => onAnswerSelected(idx, btn));
          choicesBox.appendChild(btn);
        });

        // Show appropriate screens
        startScreen.style.display = "none";
        resultScreen.style.display = "none";
        questionScreen.style.display = "block";

        // start the 60‑second countdown
        startTimer();
      }

      /* --------------------------------------------------------------
   User selected an answer
   -------------------------------------------------------------- */
      function onAnswerSelected(selectedIdx, btn) {
        // stop the countdown
        clearInterval(timerInterval);
        disableAllChoices();

        const q = quizData[currentQuestionIndex];
        const correctIdx = q.correctIndex;
        const isCorrect = selectedIdx === correctIdx;

        // color the selected button
        if (isCorrect) {
          btn.classList.add("correct");
          score++; // +1 for correct
        } else {
          btn.classList.add("wrong");
          // also highlight the correct one
          const correctBtn = choicesBox.querySelector(
            `.choice-btn[data-index="${correctIdx}"]`
          );
          if (correctBtn) correctBtn.classList.add("correct");
        }

        // store answer record
        userAnswers.push({
          questionIndex: currentQuestionIndex,
          selectedIndex: selectedIdx,
          isCorrect: isCorrect,
          timedOut: false,
        });

        // brief pause for user to see feedback → next question
        setTimeout(() => {
          currentQuestionIndex++;
          showQuestion();
        }, 1500);
      }

      /* --------------------------------------------------------------
   Timer handling
   -------------------------------------------------------------- */
      function startTimer() {
        timeLeft = questionTime;
        timerDisplay.textContent = timeLeft;
        timerInterval = setInterval(() => {
          timeLeft--;
          timerDisplay.textContent = timeLeft;
          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            onTimeOut();
          }
        }, 1000);
      }
      function resetTimer() {
        if (timerInterval) clearInterval(timerInterval);
      }
      function onTimeOut() {
        // disable buttons (user can’t answer any more)
        disableAllChoices();

        // highlight the correct answer in green
        const q = quizData[currentQuestionIndex];
        const correctBtn = choicesBox.querySelector(
          `.choice-btn[data-index="${q.correctIndex}"]`
        );
        if (correctBtn) correctBtn.classList.add("correct");

        // penalty – subtract 1 point (but never below 0)
        score = Math.max(0, score - 1);

        // record that this question timed out
        userAnswers.push({
          questionIndex: currentQuestionIndex,
          selectedIndex: null,
          isCorrect: false,
          timedOut: true,
        });

        // let the user see the “time’s up” message for a moment
        const timeoutMsg = document.createElement("div");
        timeoutMsg.style.color = "#d32f2f";
        timeoutMsg.style.fontWeight = "bold";
        timeoutMsg.style.marginTop = ".5rem";
        timeoutMsg.textContent = "Time's up!";
        questionScreen.appendChild(timeoutMsg);

        setTimeout(() => {
          timeoutMsg.remove();
          currentQuestionIndex++;
          showQuestion();
        }, 1500);
      }

      /* --------------------------------------------------------------
   Utility: disable all answer buttons
   -------------------------------------------------------------- */
      function disableAllChoices() {
        const all = choicesBox.querySelectorAll(".choice-btn");
        all.forEach((b) => {
          b.disabled = true;
          b.classList.add("disabled");
        });
      }

      /* --------------------------------------------------------------
   Show final results screen
   -------------------------------------------------------------- */
      function showResult() {
        questionScreen.style.display = "none";
        resultScreen.style.display = "block";
        finalResult.textContent = `Your Score: ${score} / ${quizData.length}`;

        // build per‑question summary
        resultList.innerHTML = "";
        userAnswers.forEach((ans, idx) => {
          const q = quizData[ans.questionIndex];
          const item = document.createElement("div");
          item.className = "result-item";

          const qHtml = `<div class="question-text">${idx + 1}. ${
            q.question
          }</div>`;
          const answerHtml = ans.timedOut
            ? `<div class="user-answer">No answer (timed out)</div>`
            : `<div class="user-answer">Your answer: ${
                q.choices[ans.selectedIndex]
              } ${ans.isCorrect ? "(Correct)" : "(Incorrect)"}</div>`;
          const correctHtml = `<div class="correct-answer">Correct answer: ${
            q.choices[q.correctIndex]
          }</div>`;

          item.innerHTML = qHtml + answerHtml + correctHtml;
          resultList.appendChild(item);
        });
      }
    </script>
  </body>
</html>
